{"question_id": "1410", "problem_slug": "traffic-light-controlled-intersection", "problem_title": "Traffic Light Controlled Intersection", "content": "There is an intersection of two roads. First road is road A where cars travel from North to South in direction 1 and from South to North in direction 2. Second road is road B where cars travel from West to East in direction 3 and from East to West in direction 4.\n\nThere is a traffic light located on each road before the intersection. A traffic light can either be green or red.\n\nGreen means cars can cross the intersection in both directions of the road.\nRed means cars in both directions cannot cross the intersection and must wait until the light turns green.\n\nThe traffic lights cannot be green on both roads at the same time. That means when the light is green on road A, it is red on road B and when the light is green on road B, it is red on road A.\nInitially, the traffic light is green on road A and red on road B. When the light is green on one road, all cars can cross the intersection in both directions until the light becomes green on the other road. No two cars traveling on different roads should cross at the same time.\nDesign a deadlock-free traffic light controlled system at this intersection.\nImplement the function void carArrived(carId, roadId, direction, turnGreen, crossCar) where:\n\ncarId is the id of the car that arrived.\nroadId is the id of the road that the car travels on.\ndirection is the direction of the car.\nturnGreen is a function you can call to turn the traffic light to green on the current road.\ncrossCar is a function you can call to let the current car cross the intersection.\n\nYour answer is considered correct if it avoids cars deadlock in the intersection. Turning the light green on a road when it was already green is considered a wrong answer.\n \nExample 1:\n\nInput: cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50]\nOutput: [\n\"Car 1 Has Passed Road A In Direction 2\",    // Traffic light on road A is green, car 1 can cross the intersection.\n\"Car 3 Has Passed Road A In Direction 1\",    // Car 3 crosses the intersection as the light is still green.\n\"Car 5 Has Passed Road A In Direction 2\",    // Car 5 crosses the intersection as the light is still green.\n\"Traffic Light On Road B Is Green\",          // Car 2 requests green light for road B.\n\"Car 2 Has Passed Road B In Direction 4\",    // Car 2 crosses as the light is green on road B now.\n\"Car 4 Has Passed Road B In Direction 3\"     // Car 4 crosses the intersection as the light is still green.\n]\n\nExample 2:\n\nInput: cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40]\nOutput: [\n\"Car 1 Has Passed Road A In Direction 2\",    // Traffic light on road A is green, car 1 can cross the intersection.\n\"Traffic Light On Road B Is Green\",          // Car 2 requests green light for road B.\n\"Car 2 Has Passed Road B In Direction 4\",    // Car 2 crosses as the light is green on road B now.\n\"Car 3 Has Passed Road B In Direction 3\",    // Car 3 crosses as the light is green on road B now.\n\"Traffic Light On Road A Is Green\",          // Car 5 requests green light for road A.\n\"Car 5 Has Passed Road A In Direction 1\",    // Car 5 crosses as the light is green on road A now.\n\"Traffic Light On Road B Is Green\",          // Car 4 requests green light for road B. Car 4 blocked until car 5 crosses and then traffic light is green on road B.\n\"Car 4 Has Passed Road B In Direction 3\"     // Car 4 crosses as the light is green on road B now.\n]\nExplanation: This is a dead-lock free scenario. Note that the scenario when car 4 crosses before turning light into green on road A and allowing car 5 to pass is also correct and Accepted scenario.\n\n \nConstraints:\n\n1 <= cars.length <= 20\ncars.length = directions.length\ncars.length = arrivalTimes.length\nAll values of cars are unique\n1 <= directions[i] <= 4\narrivalTimes is non-decreasing\n\n", "hints": [], "exampleTestcases": "[1,3,5,2,4]\n[2,1,2,4,3]\n[10,20,30,40,50]\n[1,2,3,4,5]\n[2,4,3,3,1]\n[10,20,30,40,40]", "codeSnippets": {"C++": {"langSlug": "cpp", "code": "class TrafficLight {\npublic:\n    TrafficLight() {\n        \n    }\n\n    void carArrived(\n        int carId,                   // ID of the car\n        int roadId,                  // ID of the road the car travels on. Can be 1 (road A) or 2 (road B)\n        int direction,               // Direction of the car\n        function<void()> turnGreen,  // Use turnGreen() to turn light to green on current road\n        function<void()> crossCar    // Use crossCar() to make car cross the intersection\n    ) {\n        \n    }\n};"}, "Java": {"langSlug": "java", "code": "class TrafficLight {\n\n    public TrafficLight() {\n        \n    }\n    \n    public void carArrived(\n        int carId,           // ID of the car\n        int roadId,          // ID of the road the car travels on. Can be 1 (road A) or 2 (road B)\n        int direction,       // Direction of the car\n        Runnable turnGreen,  // Use turnGreen.run() to turn light to green on current road\n        Runnable crossCar    // Use crossCar.run() to make car cross the intersection \n    ) {\n        \n    }\n}"}, "Python": {"langSlug": "python", "code": "class TrafficLight(object):\n    \n    def __init__(self):\n        pass\n\n    def carArrived(self, carId, roadId, direction, turnGreen, crossCar):\n        \"\"\"\n        :type roadId: int --> // ID of the car\n        :type carId: int --> // ID of the road the car travels on. Can be 1 (road A) or 2 (road B)\n        :type direction: int --> // Direction of the car\n        :type turnGreen: method --> // Use turnGreen() to turn light to green on current road\n        :type crossCar: method --> // Use crossCar() to make car cross the intersection\n        :rtype: void\n        \"\"\"\n        "}, "Python3": {"langSlug": "python3", "code": "class TrafficLight:\n    def __init__(self):\n        pass\n\n    def carArrived(\n        self,\n        carId: int,                      # ID of the car\n        roadId: int,                     # ID of the road the car travels on. Can be 1 (road A) or 2 (road B)\n        direction: int,                  # Direction of the car\n        turnGreen: 'Callable[[], None]', # Use turnGreen() to turn light to green on current road\n        crossCar: 'Callable[[], None]'   # Use crossCar() to make car cross the intersection\n    ) -> None:\n        "}, "C#": {"langSlug": "csharp", "code": "public class TrafficLight {\n    \n    public TrafficLight() {\n        \n    }\n    \n    public void CarArrived(\n        int carId,         // ID of the car\n        int roadId,        // ID of the road the car travels on. Can be 1 (road A) or 2 (road B)\n        int direction,     // Direction of the car\n        Action turnGreen,  // Use turnGreen() to turn light to green on current road\n        Action crossCar    // Use crossCar() to make car cross the intersection\n    ) {\n        \n    }\n}"}}}